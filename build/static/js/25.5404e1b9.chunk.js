"use strict";(self.webpackChunkjsg_inspections=self.webpackChunkjsg_inspections||[]).push([[25],{3400:(e,s,t)=>{t.d(s,{EJ:()=>l,F3:()=>o,aD:()=>n,cz:()=>d,eu:()=>a});var r=t(5043);t(579);const a=e=>{r.useEffect(()=>{const s=performance.now();return()=>{const t=performance.now()-s;t>100&&console.warn(`Slow render detected in ${e}: ${t.toFixed(2)}ms`)}})},n=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const t=[];for(let r=0;r<e.length;r+=s){const a=e.slice(r,r+s),n=await Promise.all(a);t.push(...n),r+s<e.length&&await new Promise(e=>setTimeout(e,50))}return t},o={analyzeBundleSize(){const e=Array.from(document.querySelectorAll("script[src]")),s=Array.from(document.querySelectorAll('link[rel="stylesheet"]'));return{scripts:e.map(e=>({src:e.src,async:e.async,defer:e.defer})),stylesheets:s.map(e=>({href:e.href,media:e.media})),totalScripts:e.length,totalStylesheets:s.length}},getResourceMetrics(){if(!window.performance||!window.performance.getEntriesByType)return null;const e=window.performance.getEntriesByType("resource"),s=window.performance.getEntriesByType("navigation")[0];return{totalResources:e.length,totalLoadTime:s?s.loadEventEnd-s.fetchStart:0,domContentLoaded:s?s.domContentLoadedEventEnd-s.fetchStart:0,largestResources:e.sort((e,s)=>s.transferSize-e.transferSize).slice(0,10).map(e=>({name:e.name,size:e.transferSize,duration:e.duration,type:e.initiatorType}))}},getOptimizationRecommendations(){const e=[],s=this.getResourceMetrics();if(!s)return["Performance API not available"];const t=s.largestResources.filter(e=>e.size>5e5);return t.length>0&&e.push(`Consider code splitting or lazy loading for ${t.length} large resources`),s.totalLoadTime>3e3&&e.push("Total load time exceeds 3 seconds - consider optimizing critical resources"),s.domContentLoaded>1500&&e.push("DOM content loaded time is slow - optimize critical CSS and JavaScript"),s.totalResources>50&&e.push("High number of resources - consider bundling or HTTP/2 server push"),e.length>0?e:["Bundle performance looks good!"]}},l={getMemoryUsage(){if(!window.performance||!window.performance.memory)return null;const e=window.performance.memory;return{usedJSHeapSize:Math.round(e.usedJSHeapSize/1048576),totalJSHeapSize:Math.round(e.totalJSHeapSize/1048576),jsHeapSizeLimit:Math.round(e.jsHeapSizeLimit/1048576),usage:Math.round(e.usedJSHeapSize/e.jsHeapSizeLimit*100)}},startMonitoring(){let e=arguments.length>1?arguments[1]:void 0;const s=setInterval(()=>{const s=this.getMemoryUsage();s&&e&&e(s)},arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3);return()=>clearInterval(s)}},d={budgets:{loadTime:3e3,domContentLoaded:1500,maxResourceSize:5e5,maxResources:50,maxMemoryUsage:80},checkBudget(){const e=o.getResourceMetrics(),s=l.getMemoryUsage(),t={};if(e){t.loadTime={actual:e.totalLoadTime,budget:this.budgets.loadTime,passed:e.totalLoadTime<=this.budgets.loadTime},t.domContentLoaded={actual:e.domContentLoaded,budget:this.budgets.domContentLoaded,passed:e.domContentLoaded<=this.budgets.domContentLoaded},t.resourceCount={actual:e.totalResources,budget:this.budgets.maxResources,passed:e.totalResources<=this.budgets.maxResources};const s=e.largestResources.filter(e=>e.size>this.budgets.maxResourceSize);t.resourceSize={actual:s.length,budget:0,passed:0===s.length}}return s&&(t.memoryUsage={actual:s.usage,budget:this.budgets.maxMemoryUsage,passed:s.usage<=this.budgets.maxMemoryUsage}),t}}},6025:(e,s,t)=>{t.r(s),t.d(s,{default:()=>l});var r=t(5043),a=t(3400),n=t(8221),o=t(579);const l=e=>{let{isOpen:s=!1,onClose:t,metrics:l}=e;const d=s,{darkMode:i}=(0,n.A)(),[c,m]=(0,r.useState)({bundle:null,memory:null,budget:null,resources:null}),[u,h]=(0,r.useState)(!1),[x,g]=(0,r.useState)([]);(0,r.useRef)(null);(0,r.useEffect)(()=>{d&&p()},[d]),(0,r.useEffect)(()=>{if(u&&d){const e=setInterval(p,5e3);return()=>clearInterval(e)}},[u,d]);const p=()=>{const e=a.F3.analyzeBundleSize(),s=a.F3.getResourceMetrics(),t={bundle:e,memory:a.EJ.getMemoryUsage(),budget:a.cz.checkBudget(),resources:s,recommendations:a.F3.getOptimizationRecommendations(),timestamp:(new Date).toISOString()};m(t),g(e=>[...e,t].slice(-20))};if(!d)return null;const b=i?"bg-gray-800 text-white border-gray-600":"bg-white text-gray-900 border-gray-300",f=i?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200";return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:`${b} border rounded-lg shadow-xl w-11/12 max-w-6xl max-h-5/6 overflow-hidden`,children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-300 dark:border-gray-600",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold",children:"Performance Monitor"}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:()=>{h(!u)},className:"px-3 py-1 rounded text-sm font-medium "+(u?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"),children:u?"Stop Monitoring":"Start Monitoring"}),(0,o.jsx)("button",{onClick:p,className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm font-medium",children:"Refresh"}),(0,o.jsx)("button",{onClick:()=>{const e=JSON.stringify(x,null,2),s=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download=`performance-metrics-${(new Date).toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(t)},className:"px-3 py-1 bg-purple-500 hover:bg-purple-600 text-white rounded text-sm font-medium",disabled:0===x.length,children:"Export"}),(0,o.jsx)("button",{onClick:t,className:"px-3 py-1 bg-gray-500 hover:bg-gray-600 text-white rounded text-sm font-medium",children:"Close"})]})]}),(0,o.jsxs)("div",{className:"p-4 overflow-y-auto max-h-full",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.memory&&(0,o.jsxs)("div",{className:`${f} border rounded-lg p-4`,children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Memory Usage"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Used Heap:"}),(0,o.jsxs)("span",{className:"font-mono",children:[c.memory.usedJSHeapSize," MB"]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Total Heap:"}),(0,o.jsxs)("span",{className:"font-mono",children:[c.memory.totalJSHeapSize," MB"]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Heap Limit:"}),(0,o.jsxs)("span",{className:"font-mono",children:[c.memory.jsHeapSizeLimit," MB"]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Usage:"}),(0,o.jsxs)("span",{className:"font-mono "+(c.memory.usage>80?"text-red-500":c.memory.usage>60?"text-yellow-500":"text-green-500"),children:[c.memory.usage,"%"]})]}),(0,o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:(0,o.jsx)("div",{className:"h-2 rounded-full "+(c.memory.usage>80?"bg-red-500":c.memory.usage>60?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(c.memory.usage,100)}%`}})})]})]}),c.resources&&(0,o.jsxs)("div",{className:`${f} border rounded-lg p-4`,children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Resource Metrics"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Total Resources:"}),(0,o.jsx)("span",{className:"font-mono",children:c.resources.totalResources})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Load Time:"}),(0,o.jsxs)("span",{className:"font-mono "+(c.resources.totalLoadTime>3e3?"text-red-500":c.resources.totalLoadTime>1500?"text-yellow-500":"text-green-500"),children:[Math.round(c.resources.totalLoadTime),"ms"]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"DOM Content Loaded:"}),(0,o.jsxs)("span",{className:"font-mono "+(c.resources.domContentLoaded>1500?"text-red-500":c.resources.domContentLoaded>800?"text-yellow-500":"text-green-500"),children:[Math.round(c.resources.domContentLoaded),"ms"]})]})]})]}),c.bundle&&(0,o.jsxs)("div",{className:`${f} border rounded-lg p-4`,children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Bundle Analysis"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Scripts:"}),(0,o.jsx)("span",{className:"font-mono",children:c.bundle.totalScripts})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Stylesheets:"}),(0,o.jsx)("span",{className:"font-mono",children:c.bundle.totalStylesheets})]})]})]}),c.budget&&(0,o.jsxs)("div",{className:`${f} border rounded-lg p-4`,children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Performance Budget"}),(0,o.jsx)("div",{className:"space-y-2",children:Object.entries(c.budget).map(e=>{let[s,t]=e;return(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("span",{className:"capitalize",children:[s.replace(/([A-Z])/g," $1").trim(),":"]}),(0,o.jsx)("span",{className:"font-mono px-2 py-1 rounded text-xs "+(t.passed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t.passed?"PASS":"FAIL"})]},s)})})]})]}),c.recommendations&&c.recommendations.length>0&&(0,o.jsxs)("div",{className:`${f} border rounded-lg p-4 mt-6`,children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Optimization Recommendations"}),(0,o.jsx)("ul",{className:"space-y-2",children:c.recommendations.map((e,s)=>(0,o.jsxs)("li",{className:"flex items-start",children:[(0,o.jsx)("span",{className:"text-blue-500 mr-2",children:"\u2022"}),(0,o.jsx)("span",{children:e})]},s))})]}),c.resources&&c.resources.largestResources&&(0,o.jsxs)("div",{className:`${f} border rounded-lg p-4 mt-6`,children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Largest Resources"}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full text-sm",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{className:"border-b border-gray-300 dark:border-gray-600",children:[(0,o.jsx)("th",{className:"text-left py-2",children:"Resource"}),(0,o.jsx)("th",{className:"text-left py-2",children:"Size"}),(0,o.jsx)("th",{className:"text-left py-2",children:"Duration"}),(0,o.jsx)("th",{className:"text-left py-2",children:"Type"})]})}),(0,o.jsx)("tbody",{children:c.resources.largestResources.slice(0,5).map((e,s)=>(0,o.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,o.jsx)("td",{className:"py-2 truncate max-w-xs",title:e.name,children:e.name.split("/").pop()}),(0,o.jsx)("td",{className:"py-2 font-mono",children:e.size?`${Math.round(e.size/1024)} KB`:"N/A"}),(0,o.jsxs)("td",{className:"py-2 font-mono",children:[Math.round(e.duration),"ms"]}),(0,o.jsx)("td",{className:"py-2",children:e.type})]},s))})]})})]}),x.length>1&&(0,o.jsxs)("div",{className:`${f} border rounded-lg p-4 mt-6`,children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold",children:"Performance History"}),(0,o.jsx)("button",{onClick:()=>{g([])},className:"px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded text-xs",children:"Clear History"})]}),(0,o.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing last ",x.length," measurements"]}),(0,o.jsx)("div",{className:"mt-2 space-y-1 max-h-32 overflow-y-auto",children:x.slice(-5).map((e,s)=>(0,o.jsxs)("div",{className:"text-xs font-mono",children:[new Date(e.timestamp).toLocaleTimeString(),":",e.memory&&` Memory: ${e.memory.usage}%`,e.resources&&` Load: ${Math.round(e.resources.totalLoadTime)}ms`]},s))})]})]})]})})}}}]);
//# sourceMappingURL=25.5404e1b9.chunk.js.map