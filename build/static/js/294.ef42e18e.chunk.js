"use strict";(self.webpackChunkjsg_inspections=self.webpackChunkjsg_inspections||[]).push([[294],{3294:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var i=r(5043),n=r(3953),a=r(579);const s=function(){const[e,t]=(0,i.useState)([]),[r,s]=(0,i.useState)([]),[l,o]=(0,i.useState)([]),[c,d]=(0,i.useState)([]),[p,u]=(0,i.useState)([]),[h,g]=(0,i.useState)([]),[m,j]=(0,i.useState)(""),[x,v]=(0,i.useState)(""),[f,y]=(0,i.useState)(""),[q,w]=(0,i.useState)(""),[b,E]=(0,i.useState)(""),[C,I]=(0,i.useState)(""),[S,N]=(0,i.useState)(""),[k,O]=(0,i.useState)(""),[_,P]=(0,i.useState)("history"),[G,R]=(0,i.useState)(!1);(0,i.useEffect)(()=>{B()},[]);const B=async()=>{try{R(!0);const[e,r,i,n,a,l]=await Promise.all([window.api.secureOperation("equipment.getAll",{}),window.api.secureOperation("inspections.getAll",{}),window.api.secureOperation("workOrders.getAll",{}),window.api.secureOperation("deficiencies.getAll",{}),window.api.secureOperation("loadTests.getByEquipmentId",{equipmentId:m||1}).catch(()=>[]),window.api.secureOperation("calibrations.getByEquipmentId",{equipmentId:m||1}).catch(()=>[])]);t(e||[]),s(r||[]),o(i||[]),d(n||[]),u(a||[]),g(l||[])}catch(e){console.error("Error fetching data:",e),alert("Error loading data for reports. Please try again.")}finally{R(!1)}},D=async e=>{if(j(e),e)try{const[t,r]=await Promise.all([window.api.secureOperation("loadTests.getByEquipmentId",{equipmentId:parseInt(e)}).catch(()=>[]),window.api.secureOperation("calibrations.getByEquipmentId",{equipmentId:parseInt(e)}).catch(()=>[])]);u(t||[]),g(r||[])}catch(t){console.error("Error fetching equipment-specific data:",t)}},T=async()=>{if(m)try{R(!0);const e=await window.api.secureOperation("equipment.getById",{id:parseInt(m)});let t;if(S&&k?(t=await window.api.secureOperation("inspections.getByDateRange",{startDate:S,endDate:k}),t=t.filter(e=>e.equipment_id===parseInt(m))):t=await window.api.secureOperation("inspections.getByEquipmentId",{equipmentId:parseInt(m)}),0===t.length)return void alert("No inspections found for the selected criteria.");await(0,n.gJ)(e,t)}catch(e){console.error("Error generating history report:",e),alert("Error generating history report. Please try again.")}finally{R(!1)}else alert("Please select a piece of equipment.")},L=async()=>{if(m)try{R(!0);const e=await window.api.secureOperation("equipment.getById",{id:parseInt(m)});(0,n.EJ)(e)}catch(e){console.error("Error generating equipment report:",e),alert("Error generating equipment report. Please try again.")}finally{R(!1)}else alert("Please select a piece of equipment.")},W=async()=>{if(x)try{R(!0);const e=r.find(e=>e.id===parseInt(x));if(!e)return void alert("Selected inspection not found.");await(0,n.M6)(e)}catch(e){console.error("Error generating inspection report:",e),alert("Error generating inspection report. Please try again.")}finally{R(!1)}else alert("Please select an inspection.")},A=async()=>{if(f)try{R(!0);const e=l.find(e=>e.id===parseInt(f));if(!e)return void alert("Selected work order not found.");await(0,n.R8)(e)}catch(e){console.error("Error generating work order report:",e),alert("Error generating work order report. Please try again.")}finally{R(!1)}else alert("Please select a work order.")},H=async()=>{if(q)try{R(!0);const e=c.find(e=>e.id===parseInt(q));if(!e)return void alert("Selected deficiency not found.");await(0,n.NN)(e)}catch(e){console.error("Error generating deficiency report:",e),alert("Error generating deficiency report. Please try again.")}finally{R(!1)}else alert("Please select a deficiency.")},J=async()=>{try{R(!0),await(0,n.Bc)(e)}catch(t){console.error("Error generating compliance report:",t),alert("Error generating compliance report. Please try again.")}finally{R(!1)}},M=async()=>{if(b)try{R(!0);const e=p.find(e=>e.id===parseInt(b));if(!e)return void alert("Selected load test not found.");const t=await window.api.secureOperation("equipment.getById",{id:e.equipment_id});(0,n.NC)(e,t)}catch(e){console.error("Error generating load test certificate:",e),alert("Error generating load test certificate. Please try again.")}finally{R(!1)}else alert("Please select a load test.")},z=async()=>{if(C)try{R(!0);const e=h.find(e=>e.id===parseInt(C));if(!e)return void alert("Selected calibration not found.");const t=await window.api.secureOperation("equipment.getById",{id:e.equipment_id});(0,n.v5)(e,t)}catch(e){console.error("Error generating calibration certificate:",e),alert("Error generating calibration certificate. Please try again.")}finally{R(!1)}else alert("Please select a calibration.")};return G&&!_?(0,a.jsx)("div",{className:"report-generator",children:(0,a.jsx)("div",{className:"loading",children:"Loading report data..."})}):(0,a.jsxs)("div",{className:"report-generator",children:[(0,a.jsx)("h2",{children:"Report Generator"}),(0,a.jsxs)("div",{className:"report-type-selector",children:[(0,a.jsx)("label",{children:"Report Type:"}),(0,a.jsxs)("select",{value:_,onChange:e=>P(e.target.value),children:[(0,a.jsx)("option",{value:"history",children:"Inspection History"}),(0,a.jsx)("option",{value:"equipment",children:"Equipment Details"}),(0,a.jsx)("option",{value:"inspection",children:"Individual Inspection"}),(0,a.jsx)("option",{value:"workorder",children:"Work Order"}),(0,a.jsx)("option",{value:"deficiency",children:"Deficiency"}),(0,a.jsx)("option",{value:"compliance",children:"Compliance Summary"}),(0,a.jsx)("option",{value:"loadtest",children:"Load Test Certificate"}),(0,a.jsx)("option",{value:"calibration",children:"Calibration Certificate"})]})]}),(()=>{switch(_){case"history":return(0,a.jsxs)("div",{className:"report-section",children:[(0,a.jsx)("h3",{children:"Inspection History Report"}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Equipment:"}),(0,a.jsxs)("select",{value:m,onChange:e=>D(e.target.value),required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Equipment"}),e.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.equipment_id," - ",e.type]},e.id))]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Start Date (optional):"}),(0,a.jsx)("input",{type:"date",value:S,onChange:e=>N(e.target.value)})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"End Date (optional):"}),(0,a.jsx)("input",{type:"date",value:k,onChange:e=>O(e.target.value)})]}),(0,a.jsx)("button",{onClick:T,disabled:G||!m,children:G?"Generating...":"Generate History Report"})]});case"equipment":return(0,a.jsxs)("div",{className:"report-section",children:[(0,a.jsx)("h3",{children:"Equipment Report"}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Equipment:"}),(0,a.jsxs)("select",{value:m,onChange:e=>j(e.target.value),required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Equipment"}),e.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.equipment_id," - ",e.type]},e.id))]})]}),(0,a.jsx)("button",{onClick:L,disabled:G||!m,children:G?"Generating...":"Generate Equipment Report"})]});case"inspection":return(0,a.jsxs)("div",{className:"report-section",children:[(0,a.jsx)("h3",{children:"Inspection Report"}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Inspection:"}),(0,a.jsxs)("select",{value:x,onChange:e=>v(e.target.value),required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Inspection"}),r.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.inspection_date," - ",e.inspector," - Equipment ",e.equipment_id]},e.id))]})]}),(0,a.jsx)("button",{onClick:W,disabled:G||!x,children:G?"Generating...":"Generate Inspection Report"})]});case"workorder":return(0,a.jsxs)("div",{className:"report-section",children:[(0,a.jsx)("h3",{children:"Work Order Report"}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Work Order:"}),(0,a.jsxs)("select",{value:f,onChange:e=>y(e.target.value),required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Work Order"}),l.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.wo_number," - ",e.title]},e.id))]})]}),(0,a.jsx)("button",{onClick:A,disabled:G||!f,children:G?"Generating...":"Generate Work Order Report"})]});case"deficiency":return(0,a.jsxs)("div",{className:"report-section",children:[(0,a.jsx)("h3",{children:"Deficiency Report"}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Deficiency:"}),(0,a.jsxs)("select",{value:q,onChange:e=>w(e.target.value),required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Deficiency"}),c.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.equipment_identifier," - ",e.severity," - ",e.description.substring(0,50),"..."]},e.id))]})]}),(0,a.jsx)("button",{onClick:H,disabled:G||!q,children:G?"Generating...":"Generate Deficiency Report"})]});case"compliance":return(0,a.jsxs)("div",{className:"report-section",children:[(0,a.jsx)("h3",{children:"Compliance Summary Report"}),(0,a.jsx)("p",{children:"This report provides a comprehensive overview of equipment compliance status across all equipment."}),(0,a.jsx)("button",{onClick:J,disabled:G,children:G?"Generating...":"Generate Compliance Report"})]});case"loadtest":return(0,a.jsxs)("div",{className:"report-section",children:[(0,a.jsx)("h3",{children:"Load Test Certificate"}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Equipment:"}),(0,a.jsxs)("select",{value:m,onChange:e=>D(e.target.value),required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Equipment"}),e.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.equipment_id," - ",e.type]},e.id))]})]}),m&&(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Load Test:"}),(0,a.jsxs)("select",{value:b,onChange:e=>E(e.target.value),required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Load Test"}),p.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.test_date," - ",e.test_type," - ",e.test_results]},e.id))]})]}),(0,a.jsx)("button",{onClick:M,disabled:G||!b,children:G?"Generating...":"Generate Load Test Certificate"})]});case"calibration":return(0,a.jsxs)("div",{className:"report-section",children:[(0,a.jsx)("h3",{children:"Calibration Certificate"}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Equipment:"}),(0,a.jsxs)("select",{value:m,onChange:e=>D(e.target.value),required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Equipment"}),e.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.equipment_id," - ",e.type]},e.id))]})]}),m&&(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Calibration:"}),(0,a.jsxs)("select",{value:C,onChange:e=>I(e.target.value),required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Calibration"}),h.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.calibration_date," - ",e.instrument_type," - ",e.calibration_results]},e.id))]})]}),(0,a.jsx)("button",{onClick:z,disabled:G||!C,children:G?"Generating...":"Generate Calibration Certificate"})]});default:return null}})()]})}}}]);
//# sourceMappingURL=294.ef42e18e.chunk.js.map