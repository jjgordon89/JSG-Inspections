{"version":3,"file":"static/js/953.0ae6a0f0.chunk.js","mappings":"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","sources":["utils/generatePdf.js"],"sourcesContent":["import jsPDF from 'jspdf';\r\n\r\n/**\r\n * Enhanced PDF Generation System\r\n * \r\n * This modernized system uses normalized database data instead of JSON strings\r\n * in the findings column. It queries inspection_items, deficiencies, and other\r\n * normalized tables for accurate, current data.\r\n */\r\n\r\nexport const generateEquipmentPdf = (equipment) => {\r\n  const doc = new jsPDF();\r\n\r\n  // Header\r\n  doc.setFontSize(18);\r\n  doc.text('Equipment Report', 20, 20);\r\n  \r\n  // Equipment details\r\n  doc.setFontSize(12);\r\n  let y = 35;\r\n  doc.text(`Equipment ID: ${equipment.equipment_id || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Type: ${equipment.type || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Manufacturer: ${equipment.manufacturer || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Model: ${equipment.model || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Serial Number: ${equipment.serial_number || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Capacity: ${equipment.capacity || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Installation Date: ${equipment.installation_date || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Location: ${equipment.location || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Status: ${equipment.status || 'N/A'}`, 20, y);\r\n\r\n  doc.save(`${equipment.equipment_id || 'equipment'}_report.pdf`);\r\n};\r\n\r\nexport const generateHistoryReport = async (equipment, inspections) => {\r\n  const doc = new jsPDF();\r\n  let y = 20;\r\n\r\n  // Title page\r\n  doc.setFontSize(18);\r\n  doc.text(`Inspection History Report`, 20, y);\r\n  y += 10;\r\n  doc.setFontSize(14);\r\n  doc.text(`Equipment: ${equipment.equipment_id || 'N/A'}`, 20, y);\r\n  y += 15;\r\n  \r\n  doc.setFontSize(12);\r\n  doc.text(`Manufacturer: ${equipment.manufacturer || 'N/A'}`, 20, y);\r\n  doc.text(`Model: ${equipment.model || 'N/A'}`, 100, y);\r\n  y += 7;\r\n  doc.text(`Serial Number: ${equipment.serial_number || 'N/A'}`, 20, y);\r\n  doc.text(`Capacity: ${equipment.capacity || 'N/A'} lbs`, 100, y);\r\n  y += 7;\r\n  doc.text(`Location: ${equipment.location || 'N/A'}`, 20, y);\r\n  y += 14;\r\n\r\n  doc.setFontSize(14);\r\n  doc.text('Inspection Records', 20, y);\r\n  y += 7;\r\n\r\n  // Table Header\r\n  doc.setFontSize(10);\r\n  doc.text('Date', 20, y);\r\n  doc.text('Inspector', 60, y);\r\n  doc.text('Items', 100, y);\r\n  doc.text('Failures', 130, y);\r\n  doc.text('Result', 160, y);\r\n  y += 7;\r\n  doc.line(20, y-2, 190, y-2); // horizontal line\r\n\r\n  // Process each inspection\r\n  for (const inspection of inspections) {\r\n    if (y > 270) {\r\n      doc.addPage();\r\n      y = 20;\r\n    }\r\n\r\n    try {\r\n      // Get inspection items for this inspection using secure operations\r\n      const inspectionItems = await window.api.secureOperation('inspectionItems.getByInspectionId', {\r\n        inspectionId: inspection.id\r\n      });\r\n\r\n      const totalItems = inspectionItems.length;\r\n      const failedItems = inspectionItems.filter(item => item.result === 'fail').length;\r\n      const result = failedItems === 0 ? 'Pass' : 'Fail';\r\n\r\n      doc.text(inspection.inspection_date || 'N/A', 20, y);\r\n      doc.text(inspection.inspector || 'N/A', 60, y);\r\n      doc.text(String(totalItems), 100, y);\r\n      doc.text(String(failedItems), 130, y);\r\n      doc.setTextColor(result === 'Pass' ? 'green' : 'red');\r\n      doc.text(result, 160, y);\r\n      doc.setTextColor('black');\r\n      y += 7;\r\n    } catch (error) {\r\n      console.error('Error processing inspection items:', error);\r\n      // Fallback to legacy JSON parsing if needed\r\n      let findings = [];\r\n      try {\r\n        findings = JSON.parse(inspection.findings || '[]');\r\n      } catch (e) {\r\n        findings = [];\r\n      }\r\n\r\n      const allItems = findings.flatMap(section => section.items || []);\r\n      const deficiencies = allItems.filter(item => item.result === 'fail');\r\n      const result = deficiencies.length === 0 ? 'Pass' : 'Fail';\r\n\r\n      doc.text(inspection.inspection_date || 'N/A', 20, y);\r\n      doc.text(inspection.inspector || 'N/A', 60, y);\r\n      doc.text(String(allItems.length), 100, y);\r\n      doc.text(String(deficiencies.length), 130, y);\r\n      doc.setTextColor(result === 'Pass' ? 'green' : 'red');\r\n      doc.text(result, 160, y);\r\n      doc.setTextColor('black');\r\n      y += 7;\r\n    }\r\n  }\r\n\r\n  doc.save(`history_report_${equipment.equipment_id || 'equipment'}.pdf`);\r\n};\r\n\r\nexport const generateInspectionPdf = async (inspection, options = {}) => {\r\n  const {\r\n    includeSummary = true,\r\n    includeDeficiencies = true,\r\n    includeComments = true,\r\n    includeSignature = true,\r\n    logo,\r\n  } = options;\r\n\r\n  const doc = new jsPDF();\r\n  let y = 20;\r\n\r\n  if (logo) {\r\n    try {\r\n      doc.addImage(logo, 'PNG', 150, 10, 40, 20);\r\n    } catch (e) {\r\n      console.error(\"Error adding logo:\", e);\r\n    }\r\n  }\r\n\r\n  doc.setFontSize(18);\r\n  doc.text('Inspection Report', 20, y);\r\n  y += 15;\r\n\r\n  doc.setFontSize(12);\r\n  doc.text(`Inspector: ${inspection.inspector || 'N/A'}`, 20, y);\r\n  doc.text(`Inspection Date: ${inspection.inspection_date || 'N/A'}`, 20, y + 7);\r\n  doc.text(`Equipment: ${inspection.equipment_id || 'N/A'}`, 20, y + 14);\r\n  y += 24;\r\n\r\n  try {\r\n    // Get inspection items using normalized data\r\n    const inspectionItems = await window.api.secureOperation('inspectionItems.getByInspectionId', {\r\n      inspectionId: inspection.id\r\n    });\r\n\r\n    const failedItems = inspectionItems.filter(item => item.result === 'fail');\r\n\r\n    if (includeSummary) {\r\n      const deficienciesByPriority = failedItems.reduce((acc, item) => {\r\n        const priority = item.priority || 'Minor';\r\n        acc[priority] = (acc[priority] || 0) + 1;\r\n        return acc;\r\n      }, {});\r\n\r\n      doc.setFontSize(14);\r\n      doc.text('Summary', 20, y);\r\n      y += 7;\r\n      doc.setFontSize(12);\r\n      doc.text(`Total Items Inspected: ${inspectionItems.length}`, 20, y);\r\n      y += 6;\r\n      doc.text(`Total Deficiencies: ${failedItems.length}`, 20, y);\r\n      y += 6;\r\n      Object.entries(deficienciesByPriority).forEach(([priority, count]) => {\r\n        doc.text(`${priority}: ${count}`, 25, y);\r\n        y += 6;\r\n      });\r\n      y += 4;\r\n    }\r\n\r\n    if (includeDeficiencies) {\r\n      doc.setFontSize(14);\r\n      doc.text('Deficiency Details', 20, y);\r\n      y += 7;\r\n      doc.setFontSize(11);\r\n\r\n      if (failedItems.length === 0) {\r\n        doc.text('No deficiencies found.', 20, y);\r\n        y += 7;\r\n      } else {\r\n        failedItems.forEach((item) => {\r\n          if (y > 270) { \r\n            doc.addPage(); \r\n            y = 20; \r\n          }\r\n          \r\n          doc.text(`Item: ${item.item_text || 'N/A'}`, 20, y);\r\n          y += 5;\r\n          if (item.standard_ref) {\r\n            doc.text(`Standard: ${item.standard_ref}`, 25, y);\r\n            y += 5;\r\n          }\r\n          if (item.component) {\r\n            doc.text(`Component: ${item.component}`, 25, y);\r\n            y += 5;\r\n          }\r\n          if (item.priority) {\r\n            doc.text(`Priority: ${item.priority}`, 25, y);\r\n            y += 5;\r\n          }\r\n          if (item.notes) {\r\n            doc.text(`Notes: ${item.notes}`, 25, y);\r\n            y += 5;\r\n          }\r\n          \r\n          // Handle photos\r\n          if (item.photos) {\r\n            let photos = [];\r\n            try {\r\n              photos = JSON.parse(item.photos);\r\n            } catch (e) {\r\n              // If not JSON, treat as single photo\r\n              if (typeof item.photos === 'string' && item.photos.length > 0) {\r\n                photos = [item.photos];\r\n              }\r\n            }\r\n            \r\n            if (photos.length > 0) {\r\n              doc.text(`Photos:`, 25, y);\r\n              y += 5;\r\n              photos.forEach((photo) => {\r\n                if (y > 250) { \r\n                  doc.addPage(); \r\n                  y = 20; \r\n                }\r\n                try {\r\n                  // Use dataUrl if available, otherwise use the photo directly\r\n                  const imageData = photo.dataUrl || photo;\r\n                  if (typeof imageData === 'string' && imageData.startsWith('data:image/')) {\r\n                    // Detect image format from data URL\r\n                    const format = imageData.includes('data:image/png') ? 'PNG' : 'JPEG';\r\n                    doc.addImage(imageData, format, 30, y, 30, 20);\r\n                    y += 22;\r\n                  } else {\r\n                    doc.text('[Photo format not supported]', 30, y);\r\n                    y += 6;\r\n                  }\r\n                } catch (e) {\r\n                  doc.text('[Photo could not be loaded]', 30, y);\r\n                  y += 6;\r\n                }\r\n              });\r\n            }\r\n          }\r\n          y += 4;\r\n        });\r\n      }\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error('Error getting inspection items, falling back to legacy data:', error);\r\n    \r\n    // Fallback to legacy JSON parsing\r\n    let findings = [];\r\n    try {\r\n      findings = JSON.parse(inspection.findings || '[]');\r\n    } catch (e) {\r\n      findings = [];\r\n    }\r\n\r\n    const allItems = findings.flatMap(section => section.items || []);\r\n    const deficiencies = allItems.filter(item => item.result === 'fail');\r\n\r\n    if (includeSummary) {\r\n      const deficienciesByPriority = deficiencies.reduce((acc, item) => {\r\n        acc[item.priority] = (acc[item.priority] || 0) + 1;\r\n        return acc;\r\n      }, {});\r\n\r\n      doc.setFontSize(14);\r\n      doc.text('Summary', 20, y);\r\n      y += 7;\r\n      doc.setFontSize(12);\r\n      doc.text(`Total Deficiencies: ${deficiencies.length}`, 20, y);\r\n      y += 6;\r\n      Object.entries(deficienciesByPriority).forEach(([priority, count]) => {\r\n        doc.text(`${priority}: ${count}`, 25, y);\r\n        y += 6;\r\n      });\r\n      y += 4;\r\n    }\r\n\r\n    if (includeDeficiencies) {\r\n      doc.setFontSize(14);\r\n      doc.text('Deficiency Details', 20, y);\r\n      y += 7;\r\n      doc.setFontSize(11);\r\n\r\n      if (deficiencies.length === 0) {\r\n        doc.text('No deficiencies found.', 20, y);\r\n        y += 7;\r\n      } else {\r\n        deficiencies.forEach((item) => {\r\n          if (y > 270) { doc.addPage(); y = 20; }\r\n          doc.text(`Item: ${item.text}`, 20, y);\r\n          y += 5;\r\n          doc.text(`Component: ${item.component}`, 25, y);\r\n          y += 5;\r\n          doc.text(`Priority: ${item.priority}`, 25, y);\r\n          y += 5;\r\n          doc.text(`Notes: ${item.notes}`, 25, y);\r\n          y += 5;\r\n          if (item.photos && item.photos.length > 0) {\r\n            doc.text(`Photos:`, 25, y);\r\n            y += 5;\r\n            item.photos.forEach((photo) => {\r\n              if (y > 250) { doc.addPage(); y = 20; }\r\n              try {\r\n                const imageData = photo.dataUrl || photo;\r\n                if (typeof imageData === 'string' && imageData.startsWith('data:image/')) {\r\n                  const format = imageData.includes('data:image/png') ? 'PNG' : 'JPEG';\r\n                  doc.addImage(imageData, format, 30, y, 30, 20);\r\n                  y += 22;\r\n                } else {\r\n                  doc.text('[Photo format not supported]', 30, y);\r\n                  y += 6;\r\n                }\r\n              } catch (e) {\r\n                doc.text('[Photo could not be loaded]', 30, y);\r\n                y += 6;\r\n              }\r\n            });\r\n          }\r\n          y += 4;\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  if (includeComments) {\r\n    y += 4;\r\n    doc.setFontSize(14);\r\n    doc.text('Summary Comments', 20, y);\r\n    y += 7;\r\n    doc.setFontSize(11);\r\n    doc.text(inspection.summary_comments || '', 20, y, { maxWidth: 170 });\r\n    y += 14;\r\n  }\r\n\r\n  if (includeSignature) {\r\n    doc.setFontSize(14);\r\n    doc.text('Inspector Signature', 20, y);\r\n    y += 7;\r\n    if (inspection.signature) {\r\n      try {\r\n        doc.addImage(inspection.signature, 'PNG', 20, y, 60, 20);\r\n      } catch (e) {\r\n        doc.text('[Signature could not be loaded]', 20, y);\r\n      }\r\n    }\r\n  }\r\n\r\n  doc.save(`inspection_${inspection.id || 'report'}_report.pdf`);\r\n};\r\n\r\n/**\r\n * Generate Work Order Report\r\n */\r\nexport const generateWorkOrderPdf = async (workOrder, options = {}) => {\r\n  const {\r\n    includeHistory = true,\r\n    includeDeficiencies = true,\r\n    logo\r\n  } = options;\r\n\r\n  const doc = new jsPDF();\r\n  let y = 20;\r\n\r\n  if (logo) {\r\n    try {\r\n      doc.addImage(logo, 'PNG', 150, 10, 40, 20);\r\n    } catch (e) {\r\n      console.error(\"Error adding logo:\", e);\r\n    }\r\n  }\r\n\r\n  // Header\r\n  doc.setFontSize(18);\r\n  doc.text('Work Order Report', 20, y);\r\n  y += 15;\r\n\r\n  // Work Order Details\r\n  doc.setFontSize(12);\r\n  doc.text(`WO Number: ${workOrder.wo_number || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Title: ${workOrder.title || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Equipment: ${workOrder.equipment_identifier || workOrder.equipment_id || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Work Type: ${workOrder.work_type || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Priority: ${workOrder.priority || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Status: ${workOrder.status || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Assigned To: ${workOrder.assigned_to || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Created By: ${workOrder.created_by || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Created Date: ${workOrder.created_at || 'N/A'}`, 20, y);\r\n  y += 10;\r\n\r\n  // Description\r\n  if (workOrder.description) {\r\n    doc.setFontSize(14);\r\n    doc.text('Description', 20, y);\r\n    y += 7;\r\n    doc.setFontSize(11);\r\n    doc.text(workOrder.description, 20, y, { maxWidth: 170 });\r\n    y += 14;\r\n  }\r\n\r\n  // Time and Cost Information\r\n  if (workOrder.estimated_hours || workOrder.actual_hours || workOrder.parts_cost || workOrder.labor_cost) {\r\n    doc.setFontSize(14);\r\n    doc.text('Time and Cost', 20, y);\r\n    y += 7;\r\n    doc.setFontSize(11);\r\n    \r\n    if (workOrder.estimated_hours) {\r\n      doc.text(`Estimated Hours: ${workOrder.estimated_hours}`, 20, y);\r\n      y += 6;\r\n    }\r\n    if (workOrder.actual_hours) {\r\n      doc.text(`Actual Hours: ${workOrder.actual_hours}`, 20, y);\r\n      y += 6;\r\n    }\r\n    if (workOrder.parts_cost) {\r\n      doc.text(`Parts Cost: $${workOrder.parts_cost}`, 20, y);\r\n      y += 6;\r\n    }\r\n    if (workOrder.labor_cost) {\r\n      doc.text(`Labor Cost: $${workOrder.labor_cost}`, 20, y);\r\n      y += 6;\r\n    }\r\n    y += 4;\r\n  }\r\n\r\n  // Completion Notes\r\n  if (workOrder.completion_notes) {\r\n    doc.setFontSize(14);\r\n    doc.text('Completion Notes', 20, y);\r\n    y += 7;\r\n    doc.setFontSize(11);\r\n    doc.text(workOrder.completion_notes, 20, y, { maxWidth: 170 });\r\n    y += 14;\r\n  }\r\n\r\n  // Related Deficiency\r\n  if (includeDeficiencies && workOrder.deficiency_id) {\r\n    try {\r\n      const deficiencies = await window.api.secureOperation('deficiencies.getByEquipmentId', {\r\n        equipmentId: workOrder.equipment_id\r\n      });\r\n      \r\n      const relatedDeficiency = deficiencies.find(d => d.id === workOrder.deficiency_id);\r\n      if (relatedDeficiency) {\r\n        if (y > 250) {\r\n          doc.addPage();\r\n          y = 20;\r\n        }\r\n        \r\n        doc.setFontSize(14);\r\n        doc.text('Related Deficiency', 20, y);\r\n        y += 7;\r\n        doc.setFontSize(11);\r\n        doc.text(`Severity: ${relatedDeficiency.severity}`, 20, y);\r\n        y += 6;\r\n        doc.text(`Description: ${relatedDeficiency.description}`, 20, y, { maxWidth: 170 });\r\n        y += 10;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading related deficiency:', error);\r\n    }\r\n  }\r\n\r\n  doc.save(`work_order_${workOrder.wo_number || workOrder.id}_report.pdf`);\r\n};\r\n\r\n/**\r\n * Generate Deficiency Report\r\n */\r\nexport const generateDeficiencyPdf = async (deficiency, options = {}) => {\r\n  const {\r\n    includeWorkOrders = true,\r\n    logo\r\n  } = options;\r\n\r\n  const doc = new jsPDF();\r\n  let y = 20;\r\n\r\n  if (logo) {\r\n    try {\r\n      doc.addImage(logo, 'PNG', 150, 10, 40, 20);\r\n    } catch (e) {\r\n      console.error(\"Error adding logo:\", e);\r\n    }\r\n  }\r\n\r\n  // Header\r\n  doc.setFontSize(18);\r\n  doc.text('Deficiency Report', 20, y);\r\n  y += 15;\r\n\r\n  // Deficiency Details\r\n  doc.setFontSize(12);\r\n  doc.text(`Equipment: ${deficiency.equipment_identifier || deficiency.equipment_id || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Severity: ${deficiency.severity || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Status: ${deficiency.status || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Component: ${deficiency.component || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Remove from Service: ${deficiency.remove_from_service ? 'Yes' : 'No'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Due Date: ${deficiency.due_date || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Created: ${deficiency.created_at || 'N/A'}`, 20, y);\r\n  y += 10;\r\n\r\n  // Description\r\n  doc.setFontSize(14);\r\n  doc.text('Description', 20, y);\r\n  y += 7;\r\n  doc.setFontSize(11);\r\n  doc.text(deficiency.description || 'N/A', 20, y, { maxWidth: 170 });\r\n  y += 14;\r\n\r\n  // Corrective Action\r\n  if (deficiency.corrective_action) {\r\n    doc.setFontSize(14);\r\n    doc.text('Corrective Action', 20, y);\r\n    y += 7;\r\n    doc.setFontSize(11);\r\n    doc.text(deficiency.corrective_action, 20, y, { maxWidth: 170 });\r\n    y += 14;\r\n  }\r\n\r\n  // Related Work Orders\r\n  if (includeWorkOrders && deficiency.work_order_id) {\r\n    try {\r\n      const workOrders = await window.api.secureOperation('workOrders.getByEquipmentId', {\r\n        equipmentId: deficiency.equipment_id\r\n      });\r\n      \r\n      const relatedWorkOrder = workOrders.find(wo => wo.id === deficiency.work_order_id);\r\n      if (relatedWorkOrder) {\r\n        if (y > 250) {\r\n          doc.addPage();\r\n          y = 20;\r\n        }\r\n        \r\n        doc.setFontSize(14);\r\n        doc.text('Related Work Order', 20, y);\r\n        y += 7;\r\n        doc.setFontSize(11);\r\n        doc.text(`WO Number: ${relatedWorkOrder.wo_number}`, 20, y);\r\n        y += 6;\r\n        doc.text(`Status: ${relatedWorkOrder.status}`, 20, y);\r\n        y += 6;\r\n        doc.text(`Title: ${relatedWorkOrder.title}`, 20, y, { maxWidth: 170 });\r\n        y += 10;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading related work order:', error);\r\n    }\r\n  }\r\n\r\n  doc.save(`deficiency_${deficiency.id}_report.pdf`);\r\n};\r\n\r\n/**\r\n * Generate Compliance Summary Report\r\n */\r\nexport const generateCompliancePdf = async (equipmentList, options = {}) => {\r\n  const {\r\n    includeOverdue = true,\r\n    includeCritical = true,\r\n    logo\r\n  } = options;\r\n\r\n  const doc = new jsPDF();\r\n  let y = 20;\r\n\r\n  if (logo) {\r\n    try {\r\n      doc.addImage(logo, 'PNG', 150, 10, 40, 20);\r\n    } catch (e) {\r\n      console.error(\"Error adding logo:\", e);\r\n    }\r\n  }\r\n\r\n  // Header\r\n  doc.setFontSize(18);\r\n  doc.text('Compliance Summary Report', 20, y);\r\n  y += 10;\r\n  doc.setFontSize(12);\r\n  doc.text(`Generated: ${new Date().toLocaleDateString()}`, 20, y);\r\n  y += 20;\r\n\r\n  // Equipment Compliance Status\r\n  doc.setFontSize(14);\r\n  doc.text('Equipment Compliance Status', 20, y);\r\n  y += 10;\r\n\r\n  // Table Header\r\n  doc.setFontSize(10);\r\n  doc.text('Equipment', 20, y);\r\n  doc.text('Type', 70, y);\r\n  doc.text('Last Inspection', 110, y);\r\n  doc.text('Status', 160, y);\r\n  y += 7;\r\n  doc.line(20, y-2, 190, y-2);\r\n\r\n  try {\r\n    const complianceData = await window.api.secureOperation('inspections.getComplianceStatus', {});\r\n    \r\n    complianceData.forEach((item) => {\r\n      if (y > 270) {\r\n        doc.addPage();\r\n        y = 20;\r\n      }\r\n\r\n      const lastInspection = item.last_inspection_date || 'Never';\r\n      const isOverdue = item.last_inspection_date && \r\n        new Date(item.last_inspection_date) < new Date(Date.now() - 365 * 24 * 60 * 60 * 1000);\r\n      const hasCriticalIssues = item.critical_failures > 0 || item.open_critical_deficiencies > 0;\r\n      \r\n      let status = 'OK';\r\n      let color = 'green';\r\n      \r\n      if (hasCriticalIssues) {\r\n        status = 'Critical';\r\n        color = 'red';\r\n      } else if (isOverdue) {\r\n        status = 'Overdue';\r\n        color = 'orange';\r\n      }\r\n\r\n      doc.text(item.equipment_identifier || 'N/A', 20, y);\r\n      doc.text(item.type || 'N/A', 70, y);\r\n      doc.text(lastInspection, 110, y);\r\n      doc.setTextColor(color);\r\n      doc.text(status, 160, y);\r\n      doc.setTextColor('black');\r\n      y += 7;\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error loading compliance data:', error);\r\n    doc.text('Error loading compliance data', 20, y);\r\n  }\r\n\r\n  doc.save(`compliance_summary_${new Date().toISOString().split('T')[0]}.pdf`);\r\n};\r\n\r\n/**\r\n * Generate Load Test Certificate\r\n */\r\nexport const generateLoadTestCertificate = (loadTest, equipment, options = {}) => {\r\n  const { logo } = options;\r\n  \r\n  const doc = new jsPDF();\r\n  let y = 30;\r\n\r\n  if (logo) {\r\n    try {\r\n      doc.addImage(logo, 'PNG', 150, 10, 40, 20);\r\n    } catch (e) {\r\n      console.error(\"Error adding logo:\", e);\r\n    }\r\n  }\r\n\r\n  // Certificate Header\r\n  doc.setFontSize(20);\r\n  doc.text('LOAD TEST CERTIFICATE', 105, y, { align: 'center' });\r\n  y += 20;\r\n\r\n  // Certificate Number\r\n  doc.setFontSize(12);\r\n  doc.text(`Certificate No: ${loadTest.certificate_number || 'N/A'}`, 105, y, { align: 'center' });\r\n  y += 20;\r\n\r\n  // Equipment Information\r\n  doc.setFontSize(14);\r\n  doc.text('EQUIPMENT INFORMATION', 20, y);\r\n  y += 10;\r\n  doc.setFontSize(11);\r\n  doc.text(`Equipment ID: ${equipment.equipment_id || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Type: ${equipment.type || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Manufacturer: ${equipment.manufacturer || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Model: ${equipment.model || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Serial Number: ${equipment.serial_number || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Location: ${equipment.location || 'N/A'}`, 20, y);\r\n  y += 15;\r\n\r\n  // Test Information\r\n  doc.setFontSize(14);\r\n  doc.text('TEST INFORMATION', 20, y);\r\n  y += 10;\r\n  doc.setFontSize(11);\r\n  doc.text(`Test Date: ${loadTest.test_date || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Test Type: ${loadTest.test_type || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Rated Capacity: ${loadTest.rated_capacity || 'N/A'} lbs`, 20, y);\r\n  y += 7;\r\n  doc.text(`Test Load: ${loadTest.test_load || 'N/A'} lbs (${loadTest.test_load_percentage || 'N/A'}%)`, 20, y);\r\n  y += 7;\r\n  doc.text(`Test Duration: ${loadTest.test_duration || 'N/A'} minutes`, 20, y);\r\n  y += 7;\r\n  doc.text(`Inspector: ${loadTest.inspector || 'N/A'}`, 20, y);\r\n  y += 15;\r\n\r\n  // Test Results\r\n  doc.setFontSize(14);\r\n  doc.text('TEST RESULTS', 20, y);\r\n  y += 10;\r\n  doc.setFontSize(11);\r\n  const result = loadTest.test_results || 'N/A';\r\n  doc.setTextColor(result === 'pass' ? 'green' : 'red');\r\n  doc.text(`Result: ${result.toUpperCase()}`, 20, y);\r\n  doc.setTextColor('black');\r\n  y += 10;\r\n\r\n  if (loadTest.deficiencies_found) {\r\n    doc.text('Deficiencies Found:', 20, y);\r\n    y += 7;\r\n    doc.text(loadTest.deficiencies_found, 25, y, { maxWidth: 160 });\r\n    y += 14;\r\n  }\r\n\r\n  if (loadTest.corrective_actions) {\r\n    doc.text('Corrective Actions:', 20, y);\r\n    y += 7;\r\n    doc.text(loadTest.corrective_actions, 25, y, { maxWidth: 160 });\r\n    y += 14;\r\n  }\r\n\r\n  // Next Test Due\r\n  if (loadTest.next_test_due) {\r\n    doc.text(`Next Test Due: ${loadTest.next_test_due}`, 20, y);\r\n    y += 15;\r\n  }\r\n\r\n  // Certification Statement\r\n  y += 10;\r\n  doc.setFontSize(12);\r\n  doc.text('CERTIFICATION', 105, y, { align: 'center' });\r\n  y += 10;\r\n  doc.setFontSize(10);\r\n  const certText = `This certifies that the above equipment has been load tested in accordance with applicable standards and regulations. The test was conducted by a qualified inspector and the equipment ${result === 'pass' ? 'PASSED' : 'FAILED'} the required test.`;\r\n  doc.text(certText, 20, y, { maxWidth: 170, align: 'justify' });\r\n  y += 25;\r\n\r\n  // Signature line\r\n  doc.line(20, y, 100, y);\r\n  y += 7;\r\n  doc.text('Inspector Signature', 20, y);\r\n  doc.text(`Date: ${loadTest.test_date || ''}`, 120, y);\r\n\r\n  doc.save(`load_test_certificate_${loadTest.certificate_number || loadTest.id}.pdf`);\r\n};\r\n\r\n/**\r\n * Generate Calibration Certificate\r\n */\r\nexport const generateCalibrationCertificate = (calibration, equipment, options = {}) => {\r\n  const { logo } = options;\r\n  \r\n  const doc = new jsPDF();\r\n  let y = 30;\r\n\r\n  if (logo) {\r\n    try {\r\n      doc.addImage(logo, 'PNG', 150, 10, 40, 20);\r\n    } catch (e) {\r\n      console.error(\"Error adding logo:\", e);\r\n    }\r\n  }\r\n\r\n  // Certificate Header\r\n  doc.setFontSize(20);\r\n  doc.text('CALIBRATION CERTIFICATE', 105, y, { align: 'center' });\r\n  y += 20;\r\n\r\n  // Certificate Number\r\n  doc.setFontSize(12);\r\n  doc.text(`Certificate No: ${calibration.certificate_number || 'N/A'}`, 105, y, { align: 'center' });\r\n  y += 20;\r\n\r\n  // Equipment Information\r\n  doc.setFontSize(14);\r\n  doc.text('INSTRUMENT INFORMATION', 20, y);\r\n  y += 10;\r\n  doc.setFontSize(11);\r\n  doc.text(`Equipment ID: ${equipment.equipment_id || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Instrument Type: ${calibration.instrument_type || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Manufacturer: ${equipment.manufacturer || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Model: ${equipment.model || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Serial Number: ${equipment.serial_number || 'N/A'}`, 20, y);\r\n  y += 15;\r\n\r\n  // Calibration Information\r\n  doc.setFontSize(14);\r\n  doc.text('CALIBRATION INFORMATION', 20, y);\r\n  y += 10;\r\n  doc.setFontSize(11);\r\n  doc.text(`Calibration Date: ${calibration.calibration_date || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Due Date: ${calibration.calibration_due_date || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Calibrated By: ${calibration.calibrated_by || 'N/A'}`, 20, y);\r\n  y += 7;\r\n  doc.text(`Calibration Agency: ${calibration.calibration_agency || 'N/A'}`, 20, y);\r\n  y += 15;\r\n\r\n  // Calibration Results\r\n  doc.setFontSize(14);\r\n  doc.text('CALIBRATION RESULTS', 20, y);\r\n  y += 10;\r\n  doc.setFontSize(11);\r\n  const result = calibration.calibration_results || 'N/A';\r\n  doc.setTextColor(result === 'pass' ? 'green' : result === 'fail' ? 'red' : 'orange');\r\n  doc.text(`Result: ${result.toUpperCase()}`, 20, y);\r\n  doc.setTextColor('black');\r\n  y += 10;\r\n\r\n  if (calibration.accuracy_tolerance) {\r\n    doc.text(`Required Tolerance: ${calibration.accuracy_tolerance}`, 20, y);\r\n    y += 7;\r\n  }\r\n  if (calibration.actual_accuracy) {\r\n    doc.text(`Actual Accuracy: ${calibration.actual_accuracy}`, 20, y);\r\n    y += 7;\r\n  }\r\n  if (calibration.adjustments_made) {\r\n    doc.text('Adjustments Made:', 20, y);\r\n    y += 7;\r\n    doc.text(calibration.adjustments_made, 25, y, { maxWidth: 160 });\r\n    y += 14;\r\n  }\r\n\r\n  // Notes\r\n  if (calibration.notes) {\r\n    doc.text('Notes:', 20, y);\r\n    y += 7;\r\n    doc.text(calibration.notes, 25, y, { maxWidth: 160 });\r\n    y += 15;\r\n  }\r\n\r\n  // Certification Statement\r\n  y += 10;\r\n  doc.setFontSize(12);\r\n  doc.text('CERTIFICATION', 105, y, { align: 'center' });\r\n  y += 10;\r\n  doc.setFontSize(10);\r\n  const certText = `This certifies that the above instrument has been calibrated using traceable standards and procedures. The calibration was performed by qualified personnel and the instrument ${result === 'pass' ? 'MEETS' : result === 'fail' ? 'DOES NOT MEET' : 'MEETS WITH LIMITATIONS'} the required accuracy specifications.`;\r\n  doc.text(certText, 20, y, { maxWidth: 170, align: 'justify' });\r\n  y += 25;\r\n\r\n  // Signature line\r\n  doc.line(20, y, 100, y);\r\n  y += 7;\r\n  doc.text('Calibration Technician', 20, y);\r\n  doc.text(`Date: ${calibration.calibration_date || ''}`, 120, y);\r\n\r\n  doc.save(`calibration_certificate_${calibration.certificate_number || calibration.id}.pdf`);\r\n};\r\n"],"names":["generateEquipmentPdf","equipment","doc","jsPDF","setFontSize","text","y","equipment_id","type","manufacturer","model","serial_number","capacity","installation_date","location","status","save","generateHistoryReport","async","inspections","line","inspection","addPage","inspectionItems","window","api","secureOperation","inspectionId","id","totalItems","length","failedItems","filter","item","result","inspection_date","inspector","String","setTextColor","error","console","findings","JSON","parse","e","allItems","flatMap","section","items","deficiencies","generateInspectionPdf","options","arguments","undefined","includeSummary","includeDeficiencies","includeComments","includeSignature","logo","addImage","deficienciesByPriority","reduce","acc","priority","Object","entries","forEach","_ref","count","item_text","standard_ref","component","notes","photos","photo","imageData","dataUrl","startsWith","format","includes","_ref2","summary_comments","maxWidth","signature","generateWorkOrderPdf","workOrder","includeHistory","wo_number","title","equipment_identifier","work_type","assigned_to","created_by","created_at","description","estimated_hours","actual_hours","parts_cost","labor_cost","completion_notes","deficiency_id","relatedDeficiency","equipmentId","find","d","severity","generateDeficiencyPdf","deficiency","includeWorkOrders","remove_from_service","due_date","corrective_action","work_order_id","relatedWorkOrder","wo","generateCompliancePdf","equipmentList","includeOverdue","includeCritical","Date","toLocaleDateString","lastInspection","last_inspection_date","isOverdue","now","color","critical_failures","open_critical_deficiencies","toISOString","split","generateLoadTestCertificate","loadTest","align","certificate_number","test_date","test_type","rated_capacity","test_load","test_load_percentage","test_duration","test_results","toUpperCase","deficiencies_found","corrective_actions","next_test_due","certText","generateCalibrationCertificate","calibration","instrument_type","calibration_date","calibration_due_date","calibrated_by","calibration_agency","calibration_results","accuracy_tolerance","actual_accuracy","adjustments_made"],"sourceRoot":""}